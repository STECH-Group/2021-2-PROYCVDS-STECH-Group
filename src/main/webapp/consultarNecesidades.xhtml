<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Consulta de necesidades</title>
</h:head>
<body>
    <h:form id="Formato">
        <link href="registrarCategoriaCSS.css" rel="stylesheet" type="text/css" />
        <header id="barra-administrador">
            <div class=" logo-nav-container">
                <p id="admin-header" href="#">
                    USUARIO
                </p>
                <p:commandButton id="cerrar_sesion" styleClass="ui-button-flat ui-button-plain" actionListener="#{loginBean.logOut()}" value="Cerrar Sesión" />
            </div>
        </header>
		<div class="titulo">
            <h2>NECESIDADES ACTIVAS</h2>
        </div>
		<!--ESTA ES PARA REGISTRAR RESPUESTA A NECESIDADES, SE MUESTRAN *TODAS* LAS ACTIVAS -->
        <div class="consultarnecesidad">
            <p:dataTable var="need" rows="10" value="#{usuarioBean.searchActiveOrInProcessNeeds()}" paginator="true" selectionMode="single" selection="{usuarioBean.need}" rowKey="#{need.id}" paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records" rowsPerPageTemplate="5,10,{ShowAll|'All'}">
                <p:column headerText="CATEGORIA">
                    <h:outputText value="#{need.getCategory().getName()}" />
                </p:column>

                <p:column headerText="NOMBRE">
                    <h:outputText value="#{need.getName()}" />
                </p:column>

                <p:column headerText="DESCRIPCION">
                    <h:outputText value="#{need.getDescription()}" />
                </p:column>

                <p:column headerText="URGENCIA">
                    <!--h:outputText value="#{need.getUrgency()}" /-->
                    <p:rating value="#{need.getUrgency()}" />
                </p:column>

                <p:column headerText="FECHA CREACIÓN">
                    <h:outputText value="#{need.getCreationDate()}" />
                </p:column>

                <p:column headerText="ESTADO">
                    <h:outputText value="#{need.getState()}" />
                </p:column>

                <p:column headerText="FECHA MODIFICACIÓN">
                    <h:outputText value="#{need.getModifyDate()}" />
                </p:column>
				<f:facet name="footer">
                    <p:commandButton id="boton_Actualizar" value="RESPONDER" action="registrarRespuesta?faces-redirect = true" styleClass="ui-button-secondary" /><br></br>
                    <br></br>
                    <p:commandButton id="boton_Regresar" value="REGRESAR" actionListener="#{loginBean.redirect()}" styleClass="ui-button-secondary" />
            	</f:facet>
            </p:dataTable>

		</div>
	</h:form>
</body>
</html>