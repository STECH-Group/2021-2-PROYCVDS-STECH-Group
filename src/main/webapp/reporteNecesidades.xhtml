<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui">

	<h:head>
	    <title>Reporte Necesidades</title>
	</h:head>
	<body>
		<h:form>
			<link href="reporteCSS.css" rel="stylesheet" type="text/css" />
			<header id="barra-administrador">
	
	            <div class=" logo-nav-container">
	                <p id="admin-header" href="#">
	                    ADMINISTRADOR
	                </p>
	                <p:commandButton id="cerrar_sesion" styleClass="ui-button-raised ui-button-flat ui-button-plain" actionListener="#{loginBean.logOut()}" style="float:center;" value="Cerrar Sesión" />
	            </div>
	
	        </header>
			<!-- / #main-header -->
	        <div class="titulo">
	            <h2>CATEGORIAS</h2>
	        </div>
	        
	        
	        <div class="panel consulta">
	            <p:dataTable id="reporteNecesidad" var="need" value="#{administratorBean.reportNeeds()}" paginator="true" selectionMode="single" selection="" rowKey="#{need.id}" paginatorPosition="bottom" paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
	                currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records" rowsPerPageTemplate="5,10,{ShowAll|'All'}">
	                
					<p:column headerText="ID">
	                    <h:outputText value="#{need.getId()}" />
	                </p:column>
					
					<p:column headerText="CATEGORIA">
	                    <h:outputText value="#{need.getCategory()}" />
	                </p:column>
	
	                <p:column headerText="NOMBRE">
	                    <h:outputText value="#{need.getName()}" />
	                </p:column>
	
	                <p:column headerText="DESCRIPCION">
	                    <h:outputText value="#{need.getDescription()}" />
	                </p:column>
	
	                <p:column headerText="FECHA CREACIÓN">
	                    <h:outputText value="#{need.getCreationDate()}" />
	                </p:column>
	
	                <p:column headerText="ESTADO">
	                    <h:outputText value="#{need.getState()}" />
	                </p:column>
	
	                <p:column headerText="FECHA MODIFICACIÓN">
	                    <h:outputText value="#{need.getModifyDate()}" />
	                </p:column>
					
					<f:facet name="footer">
	                    
	            	</f:facet>
	            </p:dataTable>
				
	        </div>
	        <div class="p-grid">
			    <div class="p-col-12 p-lg-6 p-xl-4">
			        <div class="card">
						<p:pieChart model="#{administratorBean.getPieChart()}" style="width: 100%; height: 500px;"/>
					</div>
			    </div>
			</div>
			
			<div>
				<p:commandButton value="XLSX" styleClass="p-mr-2 p-mb-2">
					<p:dataExporter type="xlsxstream" target="reporteNecesidad" fileName="ReporteNecesidad"/>
				</p:commandButton>
				<p:commandButton value="PDF" styleClass="p-mr-2 p-mb-2">
		            <p:dataExporter type="pdf" target="reporteNecesidad" fileName="ReporteNecesidad"/>
		        </p:commandButton>
		        <p:commandButton id = "boton_Regresar" value ="REGRESAR" actionListener ="#{loginBean.redirect()}" styleClass="ui-button-secondary" />
	        </div>
	    </h:form>
	</body>
</html>